<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Tee, Your Style</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter&family=Roboto&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #f0f4f8, #d9e2ec);
      min-height: 100vh;
    }
    #tshirtVisualContainer {
      width: 320px;
      height: 320px;
      margin: 0 auto;
      position: relative;
      border-radius: 12px;
      border: 3px solid #7c3aed;
      background-color: var(--tshirt-bg-color, white);
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      box-shadow: 0 8px 16px rgba(124, 58, 237, 0.3);
      transition: background-color 0.3s ease-in-out;
    }
    #textOnTShirt {
      color: black;
      font-size: 28px;
      font-weight: 700;
      text-align: center;
      user-select: none;
      padding: 10px;
      max-width: 90%;
      word-wrap: break-word;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.25);
      transition: font-family 0.3s ease-in-out, font-size 0.3s ease-in-out;
    }

    /* Login Form Styles */
    #auth {
      max-width: 400px;
      margin: 0 auto 2rem;
      background: white;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border: 2px solid #7c3aed;
    }
    #auth h2 {
      text-align: center;
      margin-bottom: 1.5rem;
      color: #5b21b6;
    }
    #auth input {
      border: 1.5px solid #c4b5fd;
      border-radius: 8px;
      padding: 0.75rem 1rem;
      font-size: 1rem;
      width: 100%;
      margin-bottom: 1rem;
      transition: border-color 0.3s;
    }
    #auth input:focus {
      border-color: #7c3aed;
      outline: none;
      box-shadow: 0 0 5px #a78bfa;
    }
    #auth button {
      background: linear-gradient(90deg, #7c3aed, #6d28d9);
      color: white;
      font-weight: 700;
      padding: 0.85rem;
      width: 100%;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1.1rem;
      transition: background 0.3s;
      border: none;
    }
    #auth button:hover {
      background: linear-gradient(90deg, #6d28d9, #7c3aed);
    }
    #loginError {
      color: #dc2626;
      font-size: 0.875rem;
      text-align: center;
      margin-top: -0.5rem;
      margin-bottom: 1rem;
      display: none;
    }

    /* Submit Order Button */
    #submitOrder {
      background: linear-gradient(90deg, #ef4444, #f97316);
      color: white;
      font-weight: 700;
      padding: 1rem 2rem;
      border-radius: 9999px;
      cursor: pointer;
      font-size: 1.2rem;
      border: none;
      transition: background 0.3s;
    }
    #submitOrder:hover {
      background: linear-gradient(90deg, #dc2626, #ea580c);
    }
  </style>
</head>
<body>

<header class="bg-gradient-to-r from-purple-700 to-indigo-600 text-white py-6 shadow-md">
  <h1 class="text-3xl font-bold text-center">Your Tee, Your Style</h1>
</header>

<main class="container mx-auto px-4 py-8 max-w-4xl">

  <section id="landingPage" class="mb-8 text-center">
    <h2 class="text-4xl font-extrabold mb-4 text-indigo-700">Design Your Perfect T-Shirt!</h2>
    <div class="text-9xl mb-4 animate-pulse">ðŸ‘•</div>
    <p class="text-lg text-indigo-600 mb-8">Unleash your creativity and design a unique tee that speaks volumes.</p>
    <button id="startCustomizingButton" class="bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white font-bold py-4 px-10 rounded-full text-xl transition">Start Customizing</button>
  </section>

  <section id="auth" class="hidden">
    <h2>Customer Login</h2>
    <form id="loginForm" novalidate>
      <input type="text" id="loginUsername" placeholder="Username" required minlength="3" />
      <input type="password" id="loginPassword" placeholder="Password" required minlength="6" />
      <div id="loginError"></div>
      <button type="submit">Login</button>
    </form>
  </section>

  <section id="customization" class="hidden text-center">
    <h2 class="text-2xl font-semibold mb-4 text-indigo-700">Customize Your T-Shirt</h2>

    <div id="tshirtVisualContainer">
      <div id="textOnTShirt"></div>
    </div>

    <div class="flex flex-wrap justify-center items-center mt-6 space-x-2 space-y-2 max-w-xl mx-auto">
      <select id="colorSelect" class="shadow border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        <option value="white">White</option>
<option value="black">Black</option>
<option value="red">Red</option>
<option value="blue">Blue</option>
<option value="green">Green</option>
<option value="yellow">Yellow</option>
<option value="orange">Orange</option>
<option value="purple">Purple</option>
<option value="pink">Pink</option>
<option value="#800000">Maroon</option>
<option value="#008080">Teal</option>
<option value="#FFD700">Gold</option>
<option value="#FFA500">Dark Orange</option>
<option value="#00FFFF">Cyan</option>
<option value="#FFC0CB">Light Pink</option>
<option value="#00FF00">Lime</option>
<option value="#000080">Navy</option>
<option value="#808000">Olive</option>
<option value="#A52A2A">Brown</option>
<option value="#5F9EA0">Cadet Blue</option>
<option value="#D2691E">Chocolate</option>
<option value="#6495ED">Cornflower Blue</option>
<option value="#DC143C">Crimson</option>
<option value="#00CED1">Dark Turquoise</option>
<option value="#9400D3">Dark Violet</option>
<option value="#FF1493">Deep Pink</option>
<option value="#1E90FF">Dodger Blue</option>
<option value="#B22222">Firebrick</option>
<option value="#FF4500">Orange Red</option>
<option value="#2E8B57">Sea Green</option>
<option value="#DA70D6">Orchid</option>
<option value="#EEE8AA">Pale Goldenrod</option>
<option value="#98FB98">Pale Green</option>
<option value="#AFEEEE">Pale Turquoise</option>
<option value="#DB7093">Pale Violet Red</option>
<option value="#FFDAB9">Peach Puff</option>
<option value="#CD853F">Peru</option>
<option value="#FFC0CB">Pink</option>
<option value="#DDA0DD">Plum</option>
<option value="#B0E0E6">Powder Blue</option>
<option value="#BC8F8F">Rosy Brown</option>
<option value="#4169E1">Royal Blue</option>
<option value="#8B0000">Dark Red</option>
<option value="#E9967A">Dark Salmon</option>
<option value="#8FBC8F">Dark Sea Green</option>
<option value="#483D8B">Dark Slate Blue</option>
<option value="#2F4F4F">Dark Slate Gray</option>
<option value="#00BFFF">Deep Sky Blue</option>
<option value="#696969">Dim Gray</option>
<option value="#1E90FF">Dodger Blue</option>

      </select>

      <input type="text" id="customText" placeholder="Enter your text" class="shadow border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline w-60" />

      <select id="fontSelect" class="shadow border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        <option value="'Roboto', sans-serif">Roboto</option>
<option value="'Open Sans', sans-serif">Open Sans</option>
<option value="'Lato', sans-serif">Lato</option>
<option value="'Montserrat', sans-serif">Montserrat</option>
<option value="'Oswald', sans-serif">Oswald</option>
<option value="'Raleway', sans-serif">Raleway</option>
<option value="'Merriweather', serif">Merriweather</option>
<option value="'PT Serif', serif">PT Serif</option>
<option value="'Roboto Slab', serif">Roboto Slab</option>
<option value="'Playfair Display', serif">Playfair Display</option>
<option value="'Ubuntu', sans-serif">Ubuntu</option>
<option value="'Nunito', sans-serif">Nunito</option>
<option value="'Poppins', sans-serif">Poppins</option>
<option value="'Source Sans Pro', sans-serif">Source Sans Pro</option>
<option value="'Fira Sans', sans-serif">Fira Sans</option>
<option value="'Cabin', sans-serif">Cabin</option>
<option value="'Work Sans', sans-serif">Work Sans</option>
<option value="'Comic Sans MS', cursive, sans-serif">Comic Sans MS</option>
<option value="'Georgia', serif">Georgia</option>
<option value="'Courier New', monospace">Courier New</option>

      </select>

      <select id="sizeSelect" class="shadow border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        <option value="24px">Small</option>
        <option value="28px" selected>Medium</option>
        <option value="36px">Large</option>
        <option value="48px">Extra Large</option>
      </select>
    </div>

    <button id="submitOrder" class="mt-8">Place Order</button>

    <div id="orderMessage" class="mt-4 text-lg font-semibold"></div>
  </section>

</main>

<script>
  const landingPage = document.getElementById('landingPage');
  const authSection = document.getElementById('auth');
  const customizationSection = document.getElementById('customization');

  const startCustomizingButton = document.getElementById('startCustomizingButton');
  const loginForm = document.getElementById('loginForm');
  const loginError = document.getElementById('loginError');

  const colorSelect = document.getElementById('colorSelect');
  const customText = document.getElementById('customText');
  const fontSelect = document.getElementById('fontSelect');
  const sizeSelect = document.getElementById('sizeSelect');

  const tshirtVisualContainer = document.getElementById('tshirtVisualContainer');
  const textOnTShirt = document.getElementById('textOnTShirt');

  const submitOrder = document.getElementById('submitOrder');
  const orderMessage = document.getElementById('orderMessage');

  // Show login form after clicking Start Customizing
  startCustomizingButton.addEventListener('click', () => {
    landingPage.classList.add('hidden');
    authSection.classList.remove('hidden');
  });

  // Login form submit
  loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    loginError.style.display = 'none';
    loginError.textContent = '';

    const username = document.getElementById('loginUsername').value.trim();
    const password = document.getElementById('loginPassword').value;

    if (username.length < 3 || password.length < 6) {
      loginError.textContent = 'Please enter valid username and password.';
      loginError.style.display = 'block';
      return;
    }

    try {
      const res = await fetch('/api/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password }),
      });
      if (!res.ok) {
        const err = await res.json();
        throw new Error(err.message || 'Login failed');
      }
      const data = await res.json();
      authSection.classList.add('hidden');
      customizationSection.classList.remove('hidden');
      orderMessage.textContent = `Welcome, ${data.username}! Customize your tee below.`;
      orderMessage.style.color = '#4ade80'; // green
    } catch (error) {
      loginError.textContent = error.message;
      loginError.style.display = 'block';
    }
  });

  // Update T-shirt visual
  function updateTshirtVisual() {
    const color = colorSelect.value;
    const text = customText.value;
    const font = fontSelect.value;
    const size = sizeSelect.value;

    tshirtVisualContainer.style.setProperty('--tshirt-bg-color', color);
    textOnTShirt.style.fontFamily = font;
    textOnTShirt.style.fontSize = size;
    textOnTShirt.textContent = text || 'Your Text Here';
  }

  // Listen for changes
  colorSelect.addEventListener('change', updateTshirtVisual);
  customText.addEventListener('input', updateTshirtVisual);
  fontSelect.addEventListener('change', updateTshirtVisual);
  sizeSelect.addEventListener('change', updateTshirtVisual);

  // Initialize visual on load
  updateTshirtVisual();

  // Place order button
  submitOrder.addEventListener('click', async () => {
    const order = {
      color: colorSelect.value,
      text: customText.value,
      font: fontSelect.value,
      size: sizeSelect.value
    };
    orderMessage.textContent = '';
    try {
      const res = await fetch('/api/order', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(order),
      });
      if (!res.ok) {
        const err = await res.json();
        throw new Error(err.message || 'Order failed');
      }
      const data = await res.json();
      orderMessage.textContent = data.message;
      orderMessage.style.color = '#4ade80'; // green
    } catch (error) {
      orderMessage.textContent = error.message;
      orderMessage.style.color = '#dc2626'; // red
    }
  });
</script>

</body>
</html>
